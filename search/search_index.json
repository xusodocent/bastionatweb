{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"]},"docs":[{"location":"","title":"Benvinguts","text":"<p>Benvinguts a la p\u00e0gina del m\u00f2dul de Bastionat de Xarxes i Sistemes del Curs d'especialitzaci\u00f3 en Ciberseguretat.</p>"},{"location":"#professors","title":"Professors","text":"<ul> <li>Maite Mart\u00ed</li> <li>Xuso Ort\u00ed</li> </ul>"},{"location":"#professor-especialista","title":"Professor especialista","text":"<ul> <li>Pascual Gadea</li> </ul>"},{"location":"Prac_T2/","title":"Criptograf\u00eda","text":""},{"location":"Prac_T2/#1-practica-esteganografia","title":"1. Pr\u00e0ctica Esteganografia","text":"<p>Realitza aquesta pr\u00e0ctica</p>"},{"location":"Prac_T2/#2-practica-quick-hash","title":"2. Pr\u00e0ctica Quick Hash","text":"<p>Realitza aquesta pr\u00e0ctica</p>"},{"location":"Prac_T2/#3-practica-gpg","title":"3. Pr\u00e0ctica GPG","text":"<p>Realitza aquesta pr\u00e0ctica</p>"},{"location":"Prac_T2/#4-practica-kleopatra","title":"4. Pr\u00e0ctica Kleopatra","text":"<p>Realitza aquesta pr\u00e0ctica</p>"},{"location":"Prac_T2/#5-practica-creacio-duna-pki-en-linux","title":"5. Pr\u00e0ctica creaci\u00f3 d'una PKI en Linux","text":"<p>Realitza aquesta pr\u00e0ctica</p>"},{"location":"Prac_T2/#6-practica-us-de-certificats-web","title":"6. Pr\u00e0ctica \u00das de certificats web","text":"<p>Realitza aquesta pr\u00e0ctica</p>"},{"location":"Prac_T2/#7-practica-creacio-duna-pki-en-windows","title":"7. Pr\u00e0ctica Creaci\u00f3 d'una PKI en Windows","text":"<p>Realitza aquesta pr\u00e0ctica</p>"},{"location":"apunts/","title":"Apunts complementaris","text":""},{"location":"apunts/#apunts-i","title":"Apunts I","text":"<p>Descarrega el primer bloc d'apunts</p> <p>Descarrega el segon bloc d'apunts</p>"},{"location":"criptografia/","title":"Criptograf\u00eda","text":""},{"location":"criptografia/#1-introduccion","title":"1. Introducci\u00f3n","text":"<p>Criptograf\u00eda</p> <p>La criptograf\u00eda es el desarrollo de un conjunto de t\u00e9cnicas que permiten alterar y modificar mensajes o archivos con el objetivo de que no puedan ser le\u00eddos por todos aquellos usuarios que no est\u00e9n autorizados a hacerlo. Hoy en d\u00eda, en pleno auge de las comunicaciones digitales, funciona como la base para cualquier proceso de seguridad inform\u00e1tica.</p> <p>Esta disciplina naci\u00f3 en la Antigua Grecia con el objetivo de evitar que se difundan secretos militares. Los mensajes se encriptaban con m\u00e9todos sencillos como, por ejemplo, alternando las letras del abecedario. Con el correr de los siglos esas t\u00e9cnicas se fueron complejizando considerablemente y actualmente atraviesan gran parte de nuestra vida cotidiana.</p> <p>Entre el Antiguo Egipto e Internet, los criptogramas (los mensajes cifrados) han protagonizado buena parte de los grandes episodios hist\u00f3ricos y un sinf\u00edn de an\u00e9cdotas. Existen mensajes cifrados entre los art\u00edculos del Kamasutra, se usaron por gobernantes y militares ya en los primeros estados como Egipto, Babilonia, Roma... Abundan en los textos diplom\u00e1ticos de toda \u00e9poca, indispensables para las \u00f3rdenes militares y los ej\u00e9rcitos modernos en tiempos de guerra y, por supuesto, esenciales en la actividad de los esp\u00edas. Hoy en d\u00eda, con las nuevas tecnolog\u00edas el uso de la criptograf\u00eda se ha extendido m\u00e1s all\u00e1 de su tradicional esfera estatal o pol\u00edtica, y es vital tambi\u00e9n para la actividad diaria de las empresas y ciudadanos particulares.</p> <p>Algunos ejemplos de la evoluci\u00f3n a lo largo de la historia del uso de elementos criptogr\u00e1ficos s\u00f3n los siguientes. Los espartanos utilizaron, hacia el 400 a.C., la Escitala, que puede considerarse el primer sistema de criptograf\u00eda por transposici\u00f3n, es decir, que se caracteriza por ocultar el significado real de un texto alterando el orden de los signos que lo conforman. Los militares de la ciudad-estado griega escrib\u00edan sus mensajes sobre una tela que envolv\u00eda una vara. El mensaje s\u00f3lo pod\u00eda leerse cuando se enrollaba la tela sobre un bast\u00f3n del mismo grosor, que pose\u00eda el destinatario l\u00edcito del mensaje (\u00bfel origen del \"bast\u00f3n de mando\"?).El m\u00e9todo de la escitala era extremadamente sencillo, como tambi\u00e9n lo era el que utiliz\u00f3 Julio C\u00e9sar, basado en la sustituci\u00f3n de cada letra por la situada tres puestos despu\u00e9s en el alfabeto latino. A este cifrado por sustituci\u00f3n sencilla se le conoce como cifrado C\u00e9sar. </p> <p></p> <p></p> <p>La escitala</p> <p>Mira este sencillo video sobre el funcionamiento de la escitala.</p> <p>Criptograf\u00eda y matem\u00e1tica</p> <p>Una buena introducci\u00f3n a la criptografia y las matem\u00e1ticas.</p> <p>A medida que la tecnolog\u00eda evolucion\u00f3, los elementos criptogr\u00e1ficos se volvieron m\u00e1s complejos, encontrando ejemplos c\u00f3mo la m\u00e1quina Enigma en la II Guerra Mundial.</p> <p></p>"},{"location":"criptografia/#2-funciones-hash","title":"2. Funciones HASH","text":"<p>HASH</p> <p>Una funci\u00f3n criptogr\u00e1fica hash- usualmente conocida como \u201chash\u201d- es un algoritmo matem\u00e1tico que transforma cualquier bloque arbitrario de datos en una nueva serie de caracteres con una longitud fija. Independientemente de la longitud de los datos de entrada, el valor hash de salida tendr\u00e1 siempre la misma longitud.</p> <p></p> <p>A modo de ejemplo introductorio, vemos en la siguiente figura que las funciones HASH se pueden aplicar tanto a texto c\u00f3mo a ficheros de datos.</p> <p></p> <p>Art\u00edculo</p> <p>Lee este art\u00edculo en el que se explica el funcionamiento de las funciones HASH.</p>"},{"location":"criptografia/#3-cifrado-simetrico","title":"3. Cifrado sim\u00e9trico","text":"<p>Uso de claves</p> <p>Solo utiliza una clave para cifrar y descifrar. \u00c9sta debe ser previamente conocida por todas las partes involucradas. </p> <p>Seg\u00fan se explica en la web de NIC Argentina podemos imaginar este sistema como algo similar a la seguridad de nuestra casa. Tenemos una llave para cerrar la puerta y estamos tranquilos que solo las personas con esa misma llave la van a poder abrir. Tenemos la ventaja que podemos compartirla con cualquier persona de confianza, pero tambi\u00e9n existe la posibilidad de que se extrav\u00ede, o de que alguien la robe. Esa es la principal desventaja de la criptograf\u00eda sim\u00e9trica.</p> <p></p> <p>Debes leer el siguiente art\u00edculo y visualizar el video</p>"},{"location":"criptografia/#4-cifrado-asimetrico-criptografia-de-clave-publica","title":"4. Cifrado asim\u00e9trico. Criptograf\u00eda de clave p\u00fablica.","text":"<p>Asim\u00e9trico</p> <p>Es un sistema basado en el uso de dos claves, una clave privada que s\u00f3lamente puede conocer el propietario, y una clave p\u00fablica (vinculada con la privada) que conocen todos los participantes en la comunicaci\u00f3n. </p> <p></p> <p>Si una persona que emite un mensaje a un destinatario, usa la llave p\u00fablica de este \u00faltimo para cifrarlo; una vez cifrado, solo la clave privada del destinatario podr\u00e1 descifrar el mensaje, ya que es el \u00fanico que deber\u00eda conocerla. Por tanto se logra la confidencialidad del env\u00edo del mensaje, es extremadamente dif\u00edcil que lo descifre alguien salvo el destinatario . Cualquiera, usando la llave p\u00fablica del destinatario, puede cifrarle mensajes; los que ser\u00e1n descifrados por el destinatario usando su clave privada.</p> <p>Si el propietario del par de claves usa su clave privada para cifrar un mensaje, cualquiera puede descifrarlo utilizando la clave p\u00fablica del primero. En este caso se consigue la identificaci\u00f3n y autentificaci\u00f3n del remitente, ya que se sabe que solo pudo haber sido \u00e9l quien emple\u00f3 su clave privada (salvo que un tercero la haya obtenido). Esta idea es el fundamento de la firma digital, donde jur\u00eddicamente existe la presunci\u00f3n de que el firmante es efectivamente el due\u00f1o de la clave privada.</p> <p>Los sistemas de cifrado de clave p\u00fablica o sistemas de cifrado asim\u00e9tricos se inventaron con el fin de evitar por completo el problema del intercambio de claves de los sistemas de cifrado sim\u00e9tricos. Con las claves p\u00fablicas no es necesario que el remitente y el destinatario se pongan de acuerdo en la clave a emplear. Todo lo que se requiere es que, antes de iniciar la comunicaci\u00f3n secreta, cada uno debe conseguir la llave p\u00fablica del otro y cuidar cada uno su llave privada. Es m\u00e1s, esas mismas claves p\u00fablicas pueden ser usada por cualquiera que desee comunicarse con alguno de ellos siempre que se utilice correctamente la llave p\u00fablica de cada uno. </p>"},{"location":"criptografia/#ejemplo-1-mensaje-secreto","title":"Ejemplo 1: Mensaje secreto","text":"<p>Supongamos que Ana quiere enviar a David un mensaje secreto que solo \u00e9l pueda leer.</p> <p>Primero, David env\u00eda a Ana una caja abierta, pero con cerradura, cerradura que se bloquear\u00e1 una vez se cierre la caja, y que solo podr\u00e1 abrirse con una llave, que solo David tiene. Ana recibe la caja, escribe el mensaje, lo pone en la caja y la cierra con su cerradura (ahora Ana ya no podr\u00e1 abrir la caja para acceder de nuevo al mensaje). Finalmente, Ana env\u00eda la caja a David y este la abre con su llave. En este ejemplo, la caja con la cerradura es la \u00abclave p\u00fablica\u00bb de David, y la llave de la cerradura es su \u00abclave privada\u00bb. </p> <p></p> <p>\"Caja\" y \"cerradura\" son variables, dos datos (en el caso m\u00e1s sencillo, dos n\u00fameros) necesarios ambos para resolver un determinado problema matem\u00e1tico de manera inmediata. Es cierto que teniendo solo la \"cerradura\" (alguien que interceptase la caja antes de que llegue a David), un cerrajero experto podr\u00eda abrir la caja sin necesidad de la \"llave\", pero, en la pr\u00e1ctica, un sistema de cifrado competente exhibe una complejidad tal que su resoluci\u00f3n, desconociendo la clave privada del destinatario, exige de una potencia computacional o de un coste en tiempo desproporcionadamente mayor al valor esperado del robo de la informaci\u00f3n (la computaci\u00f3n cu\u00e1ntica, por ejemplo, reducir\u00eda en mucho dicho coste, volviendo obsoletos no pocos sistemas criptogr\u00e1ficos que a d\u00eda de hoy pueden considerarse efectivamente invulnerables). </p>"},{"location":"criptografia/#ejemplo-2-firma-digital","title":"Ejemplo 2: Firma digital","text":""},{"location":"criptografia/#5-infraestructura-pki","title":"5. Infraestructura PKI","text":"<p>Seg\u00fan indica Ram\u00f3n Onrubia en los apuntes de su curso, tenemos el siguiente escenario. </p> <p>Hemos visto en el punto anterior, que la criptograf\u00eda de clave p\u00fablica nos proporciona autenticaci\u00f3n, confidencialidad, integridad y no repudio, necesarios hoy en d\u00eda para garantizar una buena seguridad en la informaci\u00f3n. Como hemos visto, esto se consigue con un sistema de claves p\u00fablicas y privadas que combin\u00e1ndolos adecuadamente nos proporcionan los servicios citados anteriormente.</p> <p>Pero el principal problema que surge es la confianza. \u00bfC\u00f3mo puedo garantizar que la clave p\u00fablica de un usuario es suya y no es la de un impostor? Cualquiera puede generar un par de claves y pretender ser otra persona. Aqu\u00ed es donde entran en juego las autoridades de certificaci\u00f3n (AC o CA, del ingl\u00e9s Certification Authority), que asumen la responsabilidad de autenticar la identidad de esa clave p\u00fablica y que aparecer\u00e1 en un documento electr\u00f3nico llamado certificado digital.</p> <p>Todo este conjunto de certificados, firmas digitales, autoridades de certificaci\u00f3n y los procesos que intervienen, forman parte de lo que se conoce como infraestructura de clave p\u00fablica que pasamos a definir a continuaci\u00f3n.</p> <p>PKI</p> <p>Por infraestructura de clave p\u00fablica o PKI (Public Key Infraestructure) se entiende el conjunto de herramientas hardware, software, procesos y procedimientos legales que permiten crear, gestionar, almacenar, distribuir y revocar certificados digitales. </p> <p>Este t\u00e9rmino incluye por tanto las autoridades de certificaci\u00f3n y al resto de elementos que participan como los certificados digitales o los algoritmos de clave p\u00fablica y firma digital en comunicaciones  y transacciones electr\u00f3nicas.</p> <p>Hay que indicar tambi\u00e9n que para usar la firma digital y los algoritmos de clave p\u00fablica, no es necesaria la PKI, como se ha podido ver en las pr\u00e1cticas del punto anterior.</p> <p>Una infraestructura de clave p\u00fablica consta de:</p> <ul> <li>Autoridades de Certificaci\u00f3n (CAs) que llevan la gesti\u00f3n de los certificados</li> <li>Autoridades de Registro (RAs), que autorizan la asociaci\u00f3n entre una clave p\u00fablica y el titular de un certificado</li> <li>Partes utilizadoras, que verifican certificados y firmas</li> <li>Repositorios (Directorios), que almacenan y distribuyen certificados y estados de los mismos</li> <li>Titulares de Certificados, que son las entidades finales, usuarios o suscriptores de los certificados y por tanto a quien pertenecen</li> <li>Autoridad de Validaci\u00f3n (opcional), que suministra informaci\u00f3n de forma online (en tiempo real) acerca del estado de un certificado</li> </ul> <p></p>"},{"location":"fail2ban_telegram/","title":"fail2ban i Telegram","text":""},{"location":"fail2ban_telegram/#fail2ban","title":"Fail2ban","text":"<p>Fail2Ban \u00e9s una eina de seguretat per a servidors Linux que ajuda a protegir contra atacs de for\u00e7a bruta. La seva principal funci\u00f3 \u00e9s monitoritzar els fitxers de registre del sistema per detectar patrons espec\u00edfics relacionats amb intents d'inici de sessi\u00f3 fallits, i despr\u00e9s pren accions com bloquejar temporalment l'adre\u00e7a IP de l'origen d'aquests intents.</p> <p>Aqu\u00ed tens com instal\u00b7lar fail2ban en un sistema Ubuntu:</p> <p>Actualitza el sistema:</p> <p>Abans d'instal\u00b7lar nous paquets, \u00e9s una bona pr\u00e0ctica actualitzar la llista de paquets disponibles i actualitzar els paquets ja instal\u00b7lats.</p> Bash<pre><code>sudo apt update\nsudo apt upgrade\n</code></pre> <p>Instal\u00b7la Fail2Ban:</p> <p>Utilitza el gestor de paquets <code>apt</code> per instal\u00b7lar fail2ban.</p> Bash<pre><code>sudo apt install fail2ban\n</code></pre> <p>Configuraci\u00f3 b\u00e0sica de Fail2Ban:</p> <p>Despr\u00e9s de la instal\u00b7laci\u00f3, fail2ban crea els seus fitxers de configuraci\u00f3 a <code>/etc/fail2ban/</code>. El fitxer principal \u00e9s <code>fail2ban.conf</code>, i les regles espec\u00edfiques es configuren a trav\u00e9s de fitxers de jail com <code>jail.conf</code> o <code>jail.local</code>.</p> Bash<pre><code>sudo cp /etc/fail2ban/jail.conf /etc/fail2ban/jail.local\n</code></pre> <p>Configura Jail per a SSH (sshd):</p> <p>Obrir el fitxer de configuraci\u00f3 de jail local amb un editor de text. Pots utilitzar <code>nano</code> o qualsevol editor que prefereixis.</p> Bash<pre><code>sudo nano /etc/fail2ban/jail.local\n</code></pre> <p>Cerca la secci\u00f3 <code>[sshd]</code> i assegura't que estigui configurada per habilitar fail2ban per a SSH. Pots ajustar el valor de <code>maxretry</code> segons les teves prefer\u00e8ncies.</p> INI<pre><code>[sshd]\nenabled = true\nport = ssh\nfilter = sshd\nlogpath = /var/log/auth.log\nmaxretry = 5\n</code></pre> <p>Guarda els canvis i tanca l'editor.</p> <p>Inicia i habilita el servei Fail2Ban:</p> <p>Inicia el servei Fail2Ban i habilita que s'executi al iniciar-se el sistema.</p> Bash<pre><code>sudo service fail2ban start\nsudo service fail2ban enable\n</code></pre> <p>o</p> Bash<pre><code>sudo systemctl start fail2ban\nsudo systemctl enable fail2ban\n</code></pre> <p>A partir d'aquest moment, Fail2Ban est\u00e0 monitoritzant els intents d'inici de sessi\u00f3 fallits a trav\u00e9s del registre del sistema (en aquest cas, <code>/var/log/auth.log</code> per SSH) i pren accions com bloquejar temporalment les adreces IP que superin el l\u00edmit especificat.</p> <p>Pots revisar els registres i configurar m\u00e9s opcions mitjan\u00e7ant els fitxers de configuraci\u00f3 de Fail2Ban. Tamb\u00e9 pots crear regles personalitzades per altres serveis i protocols. La documentaci\u00f3 oficial de Fail2Ban \u00e9s un bon recurs per a m\u00e9s detalls i configuracions avan\u00e7ades: Fail2Ban Wiki.</p>"},{"location":"fail2ban_telegram/#enviament-notificacions","title":"Enviament notificacions","text":""},{"location":"fail2ban_telegram/#crear-bot-de-telegram","title":"Crear bot de Telegram","text":"<p>Crear bot i grup</p> <p>Has de crear un bot de telegram i un grup, i afegir el bot al grup per a realitzar la pr\u00e0ctica. Has d'obtindre el token del bot i l'identificador de la conversa per a configurar el script.</p> <p>Crear un nou bot a Telegram \u00e9s un proc\u00e9s senzill que es fa a trav\u00e9s de Telegram amb l'ajuda del BotFather, un bot oficial de Telegram que permet crear i gestionar bots. Aqu\u00ed tens els passos per crear un nou bot a Telegram:</p> <p>Inicia una conversa amb el BotFather:    - V\u00e9s a la barra de cerca de Telegram i escriu \"BotFather\".    - Inicia una conversa amb el BotFather fent clic sobre ell i despr\u00e9s fes clic a \"Iniciar\" o envia el missatge <code>/start</code>.</p> <p>Crea un nou bot:    - Envia el missatge <code>/newbot</code> per comen\u00e7ar el proc\u00e9s de creaci\u00f3 d'un nou bot.</p> <p>Proporciona un nom per el teu bot:    - El BotFather et demanar\u00e0 que li donis un nom per al teu bot. Escull un nom que sigui \u00fanic, ja que cada bot a Telegram ha de tenir un nom \u00fanic. Aquest nom tamb\u00e9 ser\u00e0 utilitzat com a nom d'usuari del bot.</p> <p>Proporciona un nom d'usuari per al teu bot:    - Despr\u00e9s de triar el nom, el BotFather et demanar\u00e0 que li donis un nom d'usuari pel teu bot. Aquest nom d'usuari ha de ser \u00fanic i acabar amb la paraula \"bot\" (per exemple, \"example_bot\"). El nom d'usuari \u00e9s com s'identificar\u00e0 el teu bot a Telegram.</p> <p>Rebr\u00e0s el token del teu bot:    - Una vegada hagis completat els passos anteriors, el BotFather et enviar\u00e0 un missatge amb el token del teu bot. Aquest token \u00e9s una clau \u00fanica que identifica el teu bot i que s'utilitzar\u00e0 per a les comunicacions amb l'API de Telegram.</p> <p>Guarda aquest token de manera segura, ja que el necessitar\u00e0s per programar o configurar el teu bot.</p> <p>Ara has creat amb \u00e8xit un nou bot a Telegram. Pots comen\u00e7ar a programar-lo i personalitzar-lo segons les teves necessitats. Per obtenir m\u00e9s informaci\u00f3 sobre com interactuar amb l'API de Telegram i desenvolupar funcionalitats per al teu bot, pots revisar la documentaci\u00f3 oficial de Telegram per als desenvolupadors: Telegram Bot API.</p> <p></p>"},{"location":"fail2ban_telegram/#exemple-de-script-per-a-enviar-un-text-per-telegram","title":"Exemple de script per a enviar un text per Telegram","text":"test_telegram.md<pre><code>#!/bin/bash\nUSERID=\"\" #Chat al que queremos enviar el mensaje.\nKEY=\"\" #API Key generada por BotFather.\nTIMEOUT=\"10\" #Timeout de la petici\u00f3n a la API.\nURL=\"https://api.telegram.org/bot$KEY/sendMessage\" #URL de la API para enviar mensajes.\nLOG=\"envio_telegram_`date \"+%d%m%Y\"`.log\" #Log de env\u00edo de mensajes.\nSONIDO=0 #Cuando SONIDO es 0, suena notificaci\u00f3n, si es 1, es silenciosa.\nFECHA_EJEC=\"$(date \"+%d %b %H:%M:%S\")\" #Generamos fecha y hora de ejecuci\u00f3n.\n#Condicional para enviar sonido o no con la notificaci\u00f3n. Segundo par\u00e1metro.\nif [[ $2 -eq 1 ]] ; then\n    SONIDO=1\nfi\nTEXTO=\"&lt;b&gt;$FECHA_EJEC:&lt;/b&gt;\\n&lt;pre&gt;$1&lt;/pre&gt;\" #Texto a enviar. Fecha de ejecuci\u00f3n y primer par\u00e1metro del script.\ncurl -s --max-time $TIMEOUT -d \"parse_mode=HTML&amp;disable_notification=$SONIDO&amp;chat_id=$USERID&amp;disable_web_page_preview=1&amp;text=`echo -e \"$TEXTO\"`\" $URL &gt;&gt; $LOG 2&gt;&amp;1 #Realizamos la petici\u00f3n a la API con la informaci\u00f3n recopilada.\n\"echo\" &gt;&gt; $LOG #Introducimos l\u00ednea nueva en el log.\n</code></pre> <p>Par\u00e0metres del script</p> <p>Es pot modificar el script per a que reba la IP bloquejada com a par\u00e0metre per a comunicar-la.</p>"},{"location":"fail2ban_telegram/#configurar-per-a-executar-un-script","title":"Configurar per a executar un script","text":"<p>Afegir a l'arxiu <code>/etc/fail2ban/jail.conf</code></p> Bash<pre><code>[sshd]\n\n# To use more aggressive sshd modes set filter parameter \"mode\" in jail.local:\n# normal (default), ddos, extra or aggressive (combines all).\n# See \"tests/files/logs/sshd\" or \"filter.d/sshd.conf\" for usage example and details.\n#mode   = normal\nport    = ssh\nlogpath = %(sshd_log)s\nbackend = %(sshd_backend)s\naction  = iptables[name=SSH, port=22, protocol=tcp]\n            telegram\n</code></pre> <p>Tabulaci\u00f3</p> <p>Hi ha que tabular correctament <code>telegram</code> o no funcionar\u00e0!!</p> <p>Crear l'arxiu <code>/etc/fail2ban/action.d/telegram.conf</code></p> Bash<pre><code>[Definition]\nactionstart = /etc/fail2ban/scripts/test_telegram.sh \"iniciant telegram\"\nactionstop = /etc/fail2ban/scripts/test_telegram.sh \"parant telegram\"\nactioncheck = \nactionban = /etc/fail2ban/scripts/test_telegram.sh \"s'ha bloquejat una IP\"\nactionunban = /etc/fail2ban/scripts/test_telegram.sh \"s'ha desbloquejat una IP\"\n\n[Init]\ninit = 123\n</code></pre> <p>Carpeta scripts</p> <p>Ubicar el script en la carpeta <code>/etc/fail2ban/scripts</code> i comprova que tinga permissos d'execuci\u00f3</p>"},{"location":"fail2ban_telegram/#resposta-de-telegram","title":"Resposta de Telegram","text":"<p>T'aconselle que proves primer el script i comproves que envia correctament a telegram. Si \u00e9s aix\u00ed, a m\u00e9s a m\u00e9s d'apareixer els missatges es crea un log en una estructura semblant a aquesta:</p> JSON<pre><code>{\"ok\":true,\"result\":{\"message_id\":19,\"from\":{\"id\":6440810779,\"is_bot\":true,\"first_name\":\"fail2baninformerbot\",\"username\":\"fail2baninformerbot\"},\"chat\":{\"id\":-4000475834,\"title\":\"Avisos fail2ban\",\"type\":\"group\",\"all_members_are_administrators\":true},\"date\":1702919156,\"text\":\"18 de des. 18:05:56:\\nhola\",\"entities\":[{\"offset\":0,\"length\":20,\"type\":\"bold\"},{\"offset\":21,\"length\":4,\"type\":\"pre\"}]}}\n</code></pre>"},{"location":"fail2ban_telegram/#funcionament","title":"Funcionament","text":"<p>Si tot funciona correctament, quan es bloqueja una ip el bot de telegram es comunica.</p> <p></p> <p>Pots consultar el log del <code>fail2ban</code> en <code>/var/log/fail2ban.log</code></p> <p></p>"},{"location":"instalar_gns3_primer_escenari/","title":"1. Instal\u00b7laci\u00f3 de GNS3","text":""},{"location":"instalar_gns3_primer_escenari/#1-installation-from-packages","title":"1. Installation from Packages","text":""},{"location":"instalar_gns3_primer_escenari/#11-ubuntu-based-distributions-64-bit-only","title":"1.1 Ubuntu-based distributions (64-bit only)","text":"<p>These instructions are for Ubuntu and all distributions based on it (like Linux Mint).</p> Bash<pre><code>sudo add-apt-repository ppa:gns3/ppa\nsudo apt update                                \nsudo apt install gns3-gui gns3-server\n</code></pre> <p>when prompted whether non-root users should be allowed to use wireshark and ubridge, select Yes both times If you want IOU support</p> Bash<pre><code>sudo dpkg --add-architecture i386\nsudo apt update\nsudo apt install gns3-iou\n</code></pre>"},{"location":"instalar_gns3_primer_escenari/#2-to-install-docker-ce","title":"2. To install Docker CE","text":""},{"location":"instalar_gns3_primer_escenari/#21-ubuntu-version-xenial_and_newer","title":"2.1 <code>UBUNTU VERSION</code> (Xenial_and_newer)","text":"<p>Remove any old versions:</p> <p>Bash<pre><code>sudo apt remove docker docker-engine docker.io\nsudo snap remove docker\n</code></pre> Install the following packages:</p> <p>Bash<pre><code>sudo apt-get install apt-transport-https ca-certificates curl \\ software-properties-common\n</code></pre> Import the official Docker GPG key:</p> Bash<pre><code>curl -fsSL https://download.docker.com/linux/ubuntu/gpg | sudo apt-key add -\n</code></pre> <p>Add the appropriate repo:</p> <p>Bash<pre><code>sudo add-apt-repository \\\n\"deb [arch=amd64] https://download.docker.com/linux/ubuntu \\\n   $(lsb_release -cs) stable\"\n</code></pre> Install Docker-CE:</p> Bash<pre><code>sudo apt update\nsudo apt install docker-ce\n</code></pre>"},{"location":"instalar_gns3_primer_escenari/#22-mint___-version","title":"2.2 <code>MINT___ VERSION</code>","text":"<p>Step 1: Install Dependency packages</p> <p>Start the installation by ensuring that all the packages used by docker as dependencies are installed.</p> Bash<pre><code>sudo apt update\nsudo apt -y install apt-transport-https ca-certificates curl software-properties-common\nsudo apt -y remove docker docker-engine docker.io containerd runc\n</code></pre> <p>Step 2: Add Docker\u2019s official GPG key</p> <p>Import Docker GPG key used for signing Docker packages.</p> Bash<pre><code>curl -fsSL https://download.docker.com/linux/ubuntu/gpg | sudo gpg --dearmor -o /usr/share/keyrings/docker-archive-keyring.gpg\n</code></pre> <p>Step 3: Add the Docker repository</p> <p>Add Docker upstream repository to your Linux Mint 21 so you can install the latest stable release of Docker.</p> Bash<pre><code>echo \"deb [arch=$(dpkg --print-architecture) signed-by=/usr/share/keyrings/docker-archive-keyring.gpg] https://download.docker.com/linux/ubuntu jammy stable\" | sudo tee /etc/apt/sources.list.d/docker.list &gt; /dev/null\n</code></pre> <p>The command above will add a new line to additional repositories file.</p> Bash<pre><code>cat /etc/apt/sources.list.d/docker.list\n\ndeb [arch=amd64 signed-by=/usr/share/keyrings/docker-archive-keyring.gpg] https://download.docker.com/linux/ubuntu jammy stable\n</code></pre> <p>Step 4: Install Docker Engine and Compose Update the apt package index.</p> Bash<pre><code>$ sudo apt update\n</code></pre> <p>Then install the latest version of Docker CE and Docker Compose</p> <p>Bash<pre><code>sudo apt update\nsudo apt install docker-ce docker-ce-cli containerd.io docker-compose-plugin\n</code></pre> Check the version of docker installed</p> Bash<pre><code>docker version\n</code></pre> Note <p>docker version</p> <p>Client: Docker Engine - Community Version:           20.10.19 API version:       1.41 Go version:        go1.18.7 Git commit:        d85ef84 Built:             Thu Oct 13 16:46:58 2022 OS/Arch:           linux/amd64 Context:           default Experimental:      true</p> <p>Server: Docker Engine - Community Engine: Version:          20.10.19 API version:      1.41 (minimum version 1.12) Go version:       go1.18.7 Git commit:       c964641 Built:            Thu Oct 13 16:44:47 2022 OS/Arch:          linux/amd64 Experimental:     false containerd: Version:          1.6.8 GitCommit:        9cd3357b7fd7218e4aec3eae239db1f68a5a6ec6 runc: Version:          1.1.4 GitCommit:        v1.1.4-0-g5fd4c4d docker-init: Version:          0.19.0 GitCommit:        de40ad0</p> <p>Finally, add your user to the following groups:<code>ubridge libvirt kvm wireshark docker</code></p> <p>Opcion 1 Bash<pre><code>sudo usermod -aG ubridge,libvirt,kvm,wireshark,docker $(whoami)\n</code></pre></p> <p>Opcion 2 Bash<pre><code>sudo usermod -aG ubridge,libvirt,kvm,wireshark,docker $USER\n</code></pre></p> <p>Restart your user session by logging out and back in, or restarting the system.</p>"},{"location":"instalar_gns3_primer_escenari/#3-us-basic-de-gns3","title":"3. \u00das b\u00e0sic de GNS3","text":""},{"location":"instalar_gns3_primer_escenari/#31-importar-un-appliance","title":"3.1 Importar un appliance","text":"<p>Prova a importar un appliance seguint aquest tutorial.</p>"},{"location":"instalar_gns3_primer_escenari/#32-prova-basica-de-xarxa","title":"3.2 Prova b\u00e0sica de xarxa","text":"<p><code>GNS3</code> disposa de dues formes de connexi\u00f3 a la xarxa, amb <code>cloud</code> i amb <code>NAT</code>. Si treballes amb <code>Linux</code> has de tindre en compte que no funciona el <code>cloud</code> sobre la targeta <code>wifi</code> i si vols treballar d'eixa forma haur\u00e0s de fer-ho amb cable.</p> <p>Anem a provar la connexi\u00f3 b\u00e0sica amb un <code>VPC</code> que no \u00e9s m\u00e9s que un <code>PC virtual</code> que ens proporciona una consola. Suposa un avantatge respecte a <code>Virtual Box</code> o <code>VM Ware</code> ja que no haurem de tindre una m\u00e0quina diferent per a fer de clients.</p> <p></p> <p>Per tal de comprovar la IP que ens ha donat obrim la consola del VPC...</p> Bash<pre><code>PC1&gt; ip dhcp\nDDORA IP 192.168.122.205/24 GW 192.168.122.1\n</code></pre> <p>Podem fer <code>ping</code> des del nostre PC amfitri\u00f3...</p> Ping des de l'amfitri\u00f3 <p>xus@tourmalet:~$ ping 192.168.122.205</p> <p>PING 192.168.122.205 (192.168.122.205) 56(84) bytes of data. 64 bytes from 192.168.122.205: icmp_seq=1 ttl=64 time=0.348 ms 64 bytes from 192.168.122.205: icmp_seq=2 ttl=64 time=0.778 ms 64 bytes from 192.168.122.205: icmp_seq=3 ttl=64 time=0.787 ms</p> <p>--- 192.168.122.205 ping statistics --- 3 packets transmitted, 3 received, 0% packet loss, time 2046ms rtt min/avg/max/mdev = 0.348/0.637/0.787/0.204 ms</p>"},{"location":"instalar_gns3_primer_escenari/#33-navegacio","title":"3.3 Navegaci\u00f3","text":"<p>No ens cal una m\u00e0quina per a provar si un ordinador navega, <code>GNS3</code> ens facilita la tasca amb un appliance de <code>Firefox</code>. Cal configurar la xarxa amb dhcp.</p> <p></p> <p></p>"},{"location":"instalar_gns3_primer_escenari/#34-xarxa-basica","title":"3.4 Xarxa b\u00e0sica","text":"<p>El seg\u00fcent esquema correspon a una xarxa b\u00e0sica en la que els ordinadors poden navegar.</p> <p></p> <p>Cal configurar el <code>Mikrotik</code> per a poder navegar, per tant haurem de configurar les adreces de la part <code>LAN</code>, activar un <code>servidor dhcp</code> i fer una regla en el firewall de tipus <code>masquerade</code> per a que el router puga fer <code>NAT</code>.</p> <p>Fem la configuraci\u00f3 amb <code>Winbox</code> que despr\u00e9s explicarem com funciona.</p> <p></p> <p>Canvia el nom de les interf\u00edcies del router a <code>WAN i LAN</code>.</p> <p>Observa com en la interf\u00edcie <code>WAN</code> s'ha creat autom\u00e0ticament un <code>dhcpclient</code> i obt\u00e9 l'adre\u00e7a per dhcp. Configurem la <code>LAN</code> amb 10.0.0.1/24</p> <p></p> <p>Fem el server dhcp directament des del <code>setup</code></p> <p></p> <p>Indiquem amb una regla de <code>firewall</code> de tipus <code>NAT</code> que a tot tr\u00e0fic que vaja a eixir per la <code>WAN</code> se li aplique un <code>masquerade</code>.</p> <p></p> <p></p> <p>Comprovem que assigne les adreces correctes...</p> Bash<pre><code>PC1&gt; ip dhcp\nDORA IP 10.0.0.253/24 GW 10.0.0.1\n</code></pre> <p>Des de l'appliance de <code>Firefox</code> es veu com es pot navegar.</p>"},{"location":"instalar_gns3_primer_escenari/#4-mikrotik","title":"4. Mikrotik","text":""},{"location":"instalar_gns3_primer_escenari/#41-appliance","title":"4.1 Appliance","text":"<p>Baixa alguna versi\u00f3 estable de la web de Mikrotik en la secci\u00f3 Cloud hosted routers i tipus Raw disk image.</p> <p></p> <p>Fem una m\u00e0quina <code>Qemu</code> nova.</p> <p></p> <p>Selecciona la imatge baixada.</p> <p></p> <p>Canv\u00eda el s\u00edmbol.</p> <p></p>"},{"location":"instalar_gns3_primer_escenari/#42-configuracio","title":"4.2 Configuraci\u00f3","text":"<p>Podem configurar <code>Mikrotik</code> de tres formes diferents.</p> <ul> <li>Amb <code>Winbox</code></li> <li>Amb un appliance de <code>GNS3</code></li> <li>Navegador web</li> </ul> <p></p> <p>Warning</p> <p>L'aplicaci\u00f3 de <code>Winbox</code> est\u00e0 disponible per a <code>Windows</code>, si vols utilitzar-la en <code>Linux</code> has de fer \u00fas de <code>Wine</code>.</p> <p>Warning</p> <p>Per a poder utilitzar el navegador cal que router tinga alguna adre\u00e7a <code>IP</code> i que hi haja enrutament fins la m\u00e0quina on utilitzes el navegador.</p>"},{"location":"prac_the_dude/","title":"Pr\u00e0ctica The Dude","text":""},{"location":"prac_the_dude/#escenari","title":"Escenari","text":""},{"location":"prac_the_dude/#escenari-amb-gns3","title":"Escenari amb GNS3","text":"<p>Has de partir d'un escenari similar al seg\u00fcent:</p> <p></p> <p>Configuraci\u00f3</p> <p>Configura el Mikrotik amb les adreces i serveis necessaris per a que puga donar <code>ips</code>per <code>dhcp</code> del rang que apareix a la figura.</p>"},{"location":"prac_the_dude/#wine","title":"Wine","text":"<p>Per a usuaris de Linux</p> <p>Has de tindre instal\u00b7lat <code>Wine</code> al teu equip si eres usuari de <code>Linux</code>.</p>"},{"location":"prac_the_dude/#client-de-the-dude","title":"Client de The Dude","text":"<p>Pots consultar aquest tutorial per a instal\u00b7lar el client.</p>"},{"location":"prac_the_dude/#servidor-the-dude","title":"Servidor The Dude","text":"<p>Pots descarregar el client i el servidor de la web de Mikrotik</p> <p>Visualitza aquest tutorial per a instal\u00b7lar el servidor.</p> <p>Versions iguals</p> <p>\u00c9s necessari que el client i el servidor siguen la mateixa versi\u00f3.</p>"},{"location":"prac_the_dude/#bot-de-telegram","title":"Bot de Telegram","text":"<p>Per a aquesta pr\u00e0ctica necessites que un ChatBot de Telegram t'envie notificacions quan un dels serveis que estem monitoritzant presenta problemes.</p> <ul> <li> <p>Consulta ac\u00ed com crerar un <code>ChatBot</code> de <code>Telegram</code>.</p> </li> <li> <p>Consulta ac\u00ed com obtindre el <code>ID</code> del teu xat amb el <code>bot</code> de Telegram.</p> </li> </ul>"},{"location":"prac_the_dude/#passos-de-la-practica","title":"Passos de la pr\u00e0ctica","text":""},{"location":"prac_the_dude/#crea-lescenari","title":"Crea l'escenari","text":"<p>Amb <code>GNS3</code> crea l'escenari descrit, instal\u00b7la a les m\u00e0quines corresponents els clients i els servidors de <code>The Dude</code> i connecta't al panell de control.</p>"},{"location":"prac_the_dude/#dispositius-i-links","title":"Dispositius i links","text":"<p>Afegix dispositius i links per a poder monitoritzar l'escenari. Ha de quedar-te d'una forma molt semblant a aquesta.</p> <p></p>"},{"location":"prac_the_dude/#crea-una-notificacio-de-telegram","title":"Crea una notificaci\u00f3 de Telegram","text":"<p>El codi per a crear la notificaci\u00f3 \u00e9s aquest:</p> Text Only<pre><code>:local CHATID \"Id_de_tu _chat\"\n:local BOTID \"Token_de_tu_bot\"\n:local mensaje \" -ejemplo- The Dude --&gt;&gt; \u00a1\u00a1EPP!! A las: [Time], Equipo:[Device.Name] [Service.ProblemDescription] ([Service.Status])\"\n:local apiUrl \"https://api.telegram.org/bot$BOTID/sendmessage\\?chat_id=$CHATID&amp;text=$mensaje\"\n/tool fetch mode=https url=\"$apiUrl\" keep-result=no\n</code></pre> <p>Crea una notificaci\u00f3 com aquesta:</p> <p></p> <p>Test de notificaci\u00f3</p> <p>Quan crees la notificaci\u00f3 pots polsar el bot\u00f3 de <code>Test</code> per a comprovar que funciona correctament.</p> <p>Assignar notificaci\u00f3</p> <p>Recorda que una vegada creada la notificaci\u00f3, la pots assignar al servei que vullgues, per\u00f2 a m\u00e9s a m\u00e9s has d'indicar que utilitze notificacions.</p>"},{"location":"prac_the_dude/#provoca-una-ruptura-en-el-servei-de-ping","title":"Provoca una ruptura en el servei de <code>ping</code>","text":"<p>Assigna la notificaci\u00f3 al servei de <code>ping</code> a l'equip 10.0.0.254 i despr\u00e9s apaga aquest equip, de manera que provoques que el <code>ping</code> falle. Si tot est\u00e0 ben configurat has de rebre un missatge al <code>Telegram</code> que t'informe de la caiguda del servei.</p> <p></p>"},{"location":"prac_the_dude/#_1","title":"Pr\u00e0ctica The Dude","text":""},{"location":"servidorNAS/","title":"C\u00f2pies de seguretat","text":""},{"location":"servidorNAS/#tipus-de-copies-de-seguretat","title":"Tipus de c\u00f2pies de seguretat","text":"<p>Hi ha diversos tipus de c\u00f2pies de seguretat que pots utilitzar per protegir les teves dades. Cada tipus t\u00e9 les seves avantatges i desavantatges, i la seva utilitat pot dependre dels teus requeriments espec\u00edfics. Aqu\u00ed tens alguns dels tipus m\u00e9s comuns de c\u00f2pies de seguretat:</p>"},{"location":"servidorNAS/#1-copia-de-seguretat-completa-full-backup","title":"1. C\u00f2pia de Seguretat Completa (Full Backup):","text":"<ul> <li>Descripci\u00f3: Es realitza una c\u00f2pia completa de totes les dades seleccionades.</li> <li>Avantatges: Recuperaci\u00f3 completa i r\u00e0pida de totes les dades.</li> <li>Desavantatges: Requereix m\u00e9s temps i emmagatzematge.</li> </ul>"},{"location":"servidorNAS/#2-copia-de-seguretat-incremental","title":"2. C\u00f2pia de Seguretat Incremental:","text":"<ul> <li>Descripci\u00f3: Nom\u00e9s es realitza una c\u00f2pia de les dades que han canviat des de l'\u00faltima c\u00f2pia de seguretat.</li> <li>Avantatges: Menys emmagatzematge i temps requerit per cada c\u00f2pia de seguretat.</li> <li>Desavantatges: Recuperaci\u00f3 m\u00e9s complexa, ja que dep\u00e8n de c\u00f2pies anteriors.</li> </ul>"},{"location":"servidorNAS/#3-copia-de-seguretat-diferencial","title":"3. C\u00f2pia de Seguretat Diferencial:","text":"<ul> <li>Descripci\u00f3: Es realitza una c\u00f2pia de totes les dades que han canviat des de l'\u00faltima c\u00f2pia completa.</li> <li>Avantatges: M\u00e9s f\u00e0cil de restaurar que una c\u00f2pia incremental, ja que nom\u00e9s necessites la darrera c\u00f2pia completa i l'\u00faltima diferencial.</li> <li>Desavantatges: Pot requerir m\u00e9s emmagatzematge que una c\u00f2pia incremental.</li> </ul>"},{"location":"servidorNAS/#4-copia-de-seguretat-selectiva-o-personalitzada","title":"4. C\u00f2pia de Seguretat Selectiva o Personalitzada:","text":"<ul> <li>Descripci\u00f3: Nom\u00e9s es realitza una c\u00f2pia de les carpetes o fitxers seleccionats.</li> <li>Avantatges: Menys emmagatzematge i m\u00e9s control sobre qu\u00e8 es c\u00f2pia.</li> <li>Desavantatges: Pot ser m\u00e9s labori\u00f3s gestionar qu\u00e8 s'ha de c\u00f2pia i qu\u00e8 no.</li> </ul>"},{"location":"servidorNAS/#5-copia-de-seguretat-local","title":"5. C\u00f2pia de Seguretat Local:","text":"<ul> <li>Descripci\u00f3: Les dades es c\u00f2pien en un dispositiu de emmagatzematge local com ara un disc dur extern o un servidor local.</li> <li>Avantatges: Acc\u00e9s r\u00e0pid i control total.</li> <li>Desavantatges: Vulnerable a p\u00e8rdua de dades en cas d'incendi, inundaci\u00f3 o altres desastres locals.</li> </ul>"},{"location":"servidorNAS/#6-copia-de-seguretat-en-linia-o-en-el-nuvol","title":"6. C\u00f2pia de Seguretat en L\u00ednia o en el N\u00favol:","text":"<ul> <li>Descripci\u00f3: Les dades es c\u00f2pien i emmagatzemen en un servei de n\u00favol o en l\u00ednia.</li> <li>Avantatges: Accessible des de qualsevol lloc amb connexi\u00f3 a internet i protegit contra desastres locals.</li> <li>Desavantatges: Pot ser necess\u00e0ria una connexi\u00f3 r\u00e0pida a internet, i hi pot haver costos associats amb el servei de n\u00favol.</li> </ul>"},{"location":"servidorNAS/#7-copia-de-seguretat-automatica","title":"7. C\u00f2pia de Seguretat Autom\u00e0tica:","text":"<ul> <li>Descripci\u00f3: Es programen c\u00f2pies de seguretat autom\u00e0tiques segons un calendari o triggers espec\u00edfics.</li> <li>Avantatges: Minimitza la intervenci\u00f3 humana i assegura c\u00f2pies regulars.</li> <li>Desavantatges: Pot consumir recursos del sistema durant la c\u00f2pia de seguretat programada.</li> </ul>"},{"location":"servidorNAS/#8-copia-de-seguretat-fuente-live-backup","title":"8. C\u00f2pia de Seguretat Fuente (Live Backup):","text":"<ul> <li>Descripci\u00f3: Es realitzen c\u00f2pies de seguretat cont\u00ednuament, en temps real, a mesura que es produeixen els canvis.</li> <li>Avantatges: M\u00ednima p\u00e8rdua de dades, ja que les c\u00f2pies es realitzen immediatament despr\u00e9s de cada canvi.</li> <li>Desavantatges: Pot ser m\u00e9s intensiu en termes de recursos.</li> </ul> <p>La selecci\u00f3 del tipus de c\u00f2pia de seguretat dep\u00e8n de factors com la quantitat de dades, els recursos disponibles, la freq\u00fc\u00e8ncia dels canvis i els requisits de recuperaci\u00f3. Moltes organitzacions utilitzen una combinaci\u00f3 de diversos tipus de c\u00f2pies de seguretat per garantir una protecci\u00f3 completa de les seves dades.</p>"},{"location":"servidorNAS/#esquema-de-copies","title":"Esquema de c\u00f2pies","text":"<p>L'elecci\u00f3 d'un esquema de c\u00f2pies de seguretat dep\u00e8n de diversos factors, com la quantitat de dades, la freq\u00fc\u00e8ncia dels canvis, els recursos disponibles i les necessitats espec\u00edfiques de cada usuari o organitzaci\u00f3. Aqu\u00ed tens algunes opcions d'esquemes de c\u00f2pies de seguretat i quan podrien ser m\u00e9s recomanables:</p>"},{"location":"servidorNAS/#1-copia-de-seguretat-completa-regular-full-backup","title":"1. C\u00f2pia de Seguretat Completa Regular (Full Backup):","text":"<ul> <li>Frequ\u00e8ncia: Setmanal o mensual.</li> <li>Quan \u00e9s recomanable: Per a conjunts de dades m\u00e9s petits o quan es poden permetre temps m\u00e9s llargs de c\u00f2pies de seguretat. \u00c9s \u00fatil per a la recuperaci\u00f3 r\u00e0pida de tots els fitxers en cas de p\u00e8rdua.</li> </ul>"},{"location":"servidorNAS/#2-copia-de-seguretat-incremental_1","title":"2. C\u00f2pia de Seguretat Incremental:","text":"<ul> <li>Frequ\u00e8ncia: Di\u00e0ria o fins i tot m\u00e9s freq\u00fcent.</li> <li>Quan \u00e9s recomanable: Per a conjunts de dades grans on les c\u00f2pies de seguretat completes s\u00f3n costoses en termes de temps i emmagatzematge. Es recomana quan es produeixen canvis freq\u00fcents en els fitxers.</li> </ul>"},{"location":"servidorNAS/#3-copia-de-seguretat-diferencial_1","title":"3. C\u00f2pia de Seguretat Diferencial:","text":"<ul> <li>Frequ\u00e8ncia: Di\u00e0ria o setmanal.</li> <li>Quan \u00e9s recomanable: Similar a la c\u00f2pia de seguretat incremental, per\u00f2 amb un temps de restauraci\u00f3 m\u00e9s r\u00e0pid. \u00c9s una bona opci\u00f3 quan els temps de c\u00f2pia de seguretat incrementals s\u00f3n massa llargs, per\u00f2 encara es vol accelerar la restauraci\u00f3.</li> </ul>"},{"location":"servidorNAS/#4-copia-de-seguretat-completa-incrementalsdiferencials","title":"4. C\u00f2pia de Seguretat Completa + Incrementals/Diferencials:","text":"<ul> <li>Frequ\u00e8ncia: C\u00f2pia de seguretat completa seguida de c\u00f2pies incrementals o diferencials m\u00e9s freq\u00fcents.</li> <li>Quan \u00e9s recomanable: Per combinar els avantatges de les c\u00f2pies completes amb la efici\u00e8ncia de les c\u00f2pies incrementals o diferencials. Proporciona una bona barreja de restauraci\u00f3 r\u00e0pida i efici\u00e8ncia en emmagatzematge.</li> </ul>"},{"location":"servidorNAS/#5-copies-de-seguretat-regulars-i-automatiques","title":"5. C\u00f2pies de Seguretat Regulars i Autom\u00e0tiques:","text":"<ul> <li>Frequ\u00e8ncia: Programades amb regularitat.</li> <li>Quan \u00e9s recomanable: Sempre. \u00c9s important mantenir un esquema de c\u00f2pies de seguretat regular i automatitzat per garantir que les dades estiguin sempre protegides. Aquest esquema pot utilitzar c\u00f2pies de seguretat completes, incrementals o diferencials, segons les necessitats.</li> </ul>"},{"location":"servidorNAS/#consells-addicionals","title":"Consells Addicionals:","text":"<ul> <li> <p>Rotaci\u00f3 de Mitjans: Considera utilitzar m\u00faltiples mitjans de c\u00f2pia de seguretat (discs, n\u00favols, cintes) i rotar-los regularment per evitar problemes amb mitjans deteriorats.</p> </li> <li> <p>Prova de Restauraci\u00f3: Realitza proves de restauraci\u00f3 peri\u00f2diques per garantir que les teves c\u00f2pies de seguretat siguin efectives.</p> </li> <li> <p>Monitoritzaci\u00f3 i Informes: Utilitza eines de monitoritzaci\u00f3 i informes per supervisar l'estat i l'\u00e8xit de les teves c\u00f2pies de seguretat.</p> </li> </ul> <p>La millor estrat\u00e8gia de c\u00f2pies de seguretat dependr\u00e0 del teu entorn espec\u00edfic i de les teves necessitats. \u00c9s recomanable adaptar l'esquema de c\u00f2pies de seguretat en funci\u00f3 dels canvis en les dades i de la import\u00e0ncia de la informaci\u00f3.</p>"},{"location":"servidorNAS/#servidor-nas","title":"Servidor NAS","text":"<p>Un servidor Network Attached Storage (NAS) \u00e9s un dispositiu especialitzat que ofereix emmagatzematge centralitzat i accessibilitat a trav\u00e9s d'una xarxa local (LAN) o fins i tot a trav\u00e9s d'internet. Aquest tipus de servidor est\u00e0 dissenyat espec\u00edficament per a la gesti\u00f3 i el compartiment de dades, oferint funcions avan\u00e7ades com a emmagatzematge en xarxa, gesti\u00f3 de fitxers, control d'acc\u00e9s i serveis de servidor addicionals. Aqu\u00ed tens algunes de les caracter\u00edstiques i funcions principals d'un servidor NAS:</p>"},{"location":"servidorNAS/#caracteristiques-principals","title":"Caracter\u00edstiques Principals:","text":"<p>Emmagatzematge Centralitzat:    - El NAS proporciona una ubicaci\u00f3 centralitzada on es poden emmagatzemar i organitzar dades. Aix\u00f2 facilita l'acc\u00e9s i la gesti\u00f3 de fitxers per part dels usuaris de la xarxa.</p> <p>Xarxa Local (LAN) i Acc\u00e9s Remot:    - Pot ser accedit localment a trav\u00e9s de la xarxa local de l'usuari o de forma remota mitjan\u00e7ant una connexi\u00f3 a internet. Aix\u00f2 permet l'acc\u00e9s a les dades des de qualsevol lloc amb una connexi\u00f3 a la xarxa.</p> <p>Serveis de Fitxers:    - Ofereix serveis de fitxers com compartici\u00f3 de fitxers, transfer\u00e8ncia de fitxers i suport per protocols com SMB/CIFS (per a sistemes Windows), NFS (per a sistemes Unix/Linux) i AFP (per a sistemes macOS).</p> <p>Gesti\u00f3 de Discs i RAID:    - Molts servidors NAS permeten la gesti\u00f3 de m\u00faltiples discs durs, amb la possibilitat de configurar-los utilitzant diverses opcions RAID (Redundant Array of Independent Disks) per millorar la seguretat i la disponibilitat de les dades.</p> <p>Serveis Addicionals:    - Pot oferir diversos serveis addicionals com serveis de c\u00f2pia de seguretat, servidor multim\u00e8dia, servei de correu electr\u00f2nic, servidors d'aplicacions, i altres aplicacions que augmenten la funcionalitat del dispositiu.</p> <p>Control d'Acc\u00e9s i Seguretat:    - Proporciona funcions de control d'acc\u00e9s per gestionar qui pot accedir a les carpetes o fitxers espec\u00edfics. La seguretat \u00e9s una consideraci\u00f3 important amb diverses opcions de xifrat i autenticaci\u00f3.</p> <p>Gesti\u00f3 Remota:    - Molts servidors NAS ofereixen interf\u00edcies de gesti\u00f3 web que permeten als usuaris gestionar i configurar el dispositiu de forma remota.</p> <p>Consum Energ\u00e8tic Eficient:    - S\u00f3n dissenyats per ser eficients en el consum d'energia, especialment comparats amb servidors m\u00e9s grans i sistemes de c\u00f2pies de seguretat tradicionals.</p> <p>Eines de Col\u00b7laboraci\u00f3:    - Alguns models inclouen funcionalitats de col\u00b7laboraci\u00f3 com \u00e0lbums de fotos compartits, aplicacions d'edici\u00f3 de documents en l\u00ednia i altres eines col\u00b7laboratives.</p> <p>Un servidor NAS \u00e9s una soluci\u00f3 vers\u00e0til que pot ser utilitzada tant per a usuaris dom\u00e8stics com per a empreses, proporcionant un mitj\u00e0 eficient i segur d'emmagatzemar i accedir a les dades. La seva flexibilitat i escalabilitat fan que sigui una opci\u00f3 popular per a diverses necessitats d'emmagatzematge.</p>"},{"location":"servidorNAS/#openmediavault","title":"Openmediavault","text":"<p>Openmediavault</p> <p>\u00c9s una distribuci\u00f3 de <code>Linux</code> orientada a la creaci\u00f3 de servidors NAS. Pots descarregar la iso ac\u00ed</p> <p>OpenMediaVault (OMV) \u00e9s una soluci\u00f3 de gesti\u00f3 de serveis de xarxa de codi obert basada en Linux que proporciona eines per a la creaci\u00f3 d'un servidor de xarxa amb funcionalitats com emmagatzematge en xarxa (NAS), control d'acc\u00e9s, c\u00f2pies de seguretat i altres serveis relacionats. Aquesta plataforma est\u00e0 dissenyada per ser una soluci\u00f3 lleugera i f\u00e0cil d'utilitzar, adequada per a usuaris dom\u00e8stics, petits empresaris i altres entorns similars.</p> <p>Aqu\u00ed tens algunes de les caracter\u00edstiques principals d'OpenMediaVault:</p> <ol> <li> <p>Interf\u00edcie Web Intu\u00eftiva: OMV ofereix una interf\u00edcie web f\u00e0cil d'utilitzar que permet als usuaris gestionar les seves tasques sense necessitat de con\u00e8ixer la l\u00ednia de comandes de Linux. Aquesta interf\u00edcie ofereix un panell de control amb opcions clares i accessible des de qualsevol navegador web.</p> </li> <li> <p>Gesti\u00f3 de Emmagatzematge: Proporciona eines per gestionar discs durs, crear particions, configurar RAID (Redundant Array of Independent Disks) i gestionar l'espai de magatzematge en xarxa.</p> </li> <li> <p>Serveis de Xarxa: Inclou serveis de xarxa com SMB/CIFS (per a compatibilitat amb Windows), NFS (per a compatibilitat amb Unix/Linux) i AFP (per a compatibilitat amb macOS), permetent la compartici\u00f3 de fitxers a trav\u00e9s de la xarxa.</p> </li> <li> <p>C\u00f2pies de Seguretat i Restauraci\u00f3: Ofereix funcions integrades per realitzar c\u00f2pies de seguretat programades i restaurar-les f\u00e0cilment en cas de necessitat.</p> </li> <li> <p>Control d'Acc\u00e9s: Proporciona opcions de control d'acc\u00e9s per gestionar qui t\u00e9 permisos per accedir a carpetes o fitxers espec\u00edfics.</p> </li> <li> <p>Plugins i Extensions: OMV t\u00e9 un sistema de plugins que permet als usuaris ampliar les funcionalitats del sistema amb diverses extensions. Aix\u00f2 inclou l'acc\u00e9s a serveis com Plex Media Server, Nextcloud i altres.</p> </li> <li> <p>Monitoritzaci\u00f3 del Sistema: Inclou eines per a la monitoritzaci\u00f3 del sistema, incloent informaci\u00f3 sobre l'\u00fas de la CPU, mem\u00f2ria i altres recursos.</p> </li> <li> <p>Comunitat Activa: Sota la llic\u00e8ncia de codi obert, OMV gaudeix d'una comunitat activa d'usuaris i desenvolupadors que ofereixen suport i col\u00b7laboraci\u00f3.</p> </li> </ol> <p>OpenMediaVault es presenta com una opci\u00f3 vers\u00e0til per als usuaris que busquen configurar un servidor de xarxa amb funcionalitats avan\u00e7ades sense haver de fer servir una gran quantitat de coneixements t\u00e8cnics. \u00c9s especialment \u00fatil per a la creaci\u00f3 d'un servidor NAS, per\u00f2 tamb\u00e9 pot ser utilitzat per altres finalitats relacionades amb la gesti\u00f3 de serveis de xarxa.</p>"},{"location":"servidorNAS/#programari","title":"Programari","text":"<p>Hi ha diversos programaris de c\u00f2pies de seguretat disponibles per a sistemes Windows i Linux, cadascun amb les seves caracter\u00edstiques i funcionalitats \u00faniques. Aqu\u00ed tens una llista de alguns dels principals programaris de c\u00f2pies de seguretat per a ambdues plataformes:</p>"},{"location":"servidorNAS/#windows","title":"Windows:","text":"<p>Backup and Restore (Windows 7):    - El sistema operatiu Windows 7 ofereix una funci\u00f3 de c\u00f2pies de seguretat i restauraci\u00f3 integrada que permet als usuaris realitzar c\u00f2pies de seguretat programades.</p> <p>File History (Windows 8 i 10):    - File History \u00e9s una funcionalitat integrada en Windows 8 i 10 que realitza c\u00f2pies de seguretat autom\u00e0tiques de fitxers importants. Es pot configurar per fer c\u00f2pies en un disc dur extern o a una ubicaci\u00f3 de xarxa.</p> <p>Acronis True Image:    - Acronis True Image ofereix funcions avan\u00e7ades de c\u00f2pies de seguretat, com la c\u00f2pia de seguretat de tot el sistema, la restauraci\u00f3 granular i la possibilitat de crear imatges de disc.</p> <p>EaseUS Todo Backup:    - EaseUS Todo Backup proporciona funcions de c\u00f2pia de seguretat i restauraci\u00f3 de tot el sistema, particions o fitxers individuals. Tamb\u00e9 ofereix c\u00f2pies de seguretat programades i incremental.</p> <p>Veeam Agent for Windows:    - Veeam Agent for Windows \u00e9s una soluci\u00f3 gratu\u00efta que permet fer c\u00f2pies de seguretat i restaurar tot el sistema, volums o fitxers espec\u00edfics.</p>"},{"location":"servidorNAS/#linux","title":"Linux:","text":"<p>rsync:    - <code>rsync</code> \u00e9s una eina de l\u00ednia de comandes que es pot utilitzar per sincronitzar i fer c\u00f2pies de fitxers i directoris entre sistemes. \u00c9s una eina potent i \u00e0mpliament utilitzada en entorns de Linux.</p> <p>Duplicity:    - Duplicity \u00e9s una eina de c\u00f2pies de seguretat basada en la l\u00ednia de comandes que ofereix xifrat, compressi\u00f3 i suport per diversos serveis de copia de seguretat remots com Amazon S3, SSH, i altres.</p> <p>Bacula:    - Bacula \u00e9s una soluci\u00f3 de c\u00f2pies de seguretat empresarial amb una arquitectura client-servidor. Pot gestionar c\u00f2pies de seguretat, restauracions i verificacions de fitxers.</p> <p>Amanda Backup:    - Amanda Backup, o simplement Amanda, \u00e9s una soluci\u00f3 de c\u00f2pies de seguretat lliure i d'\u00fas empresarial per a sistemes Unix i Linux.</p> <p>Restic:    - Restic \u00e9s una eina de c\u00f2pies de seguretat moderna que ofereix suport per a diverses plataformes, xifrat, deduplicaci\u00f3 i integraci\u00f3 amb diversos serveis de c\u00f2pies de seguretat en n\u00favol.</p> <p>Timeshift:    - Timeshift \u00e9s una eina espec\u00edfica per a Linux que ofereix c\u00f2pies de seguretat del sistema de fitxers, permetent als usuaris restaurar el sistema a un estat anterior.</p> <p>Es recomana seleccionar una eina que compleixi les teves necessitats espec\u00edfiques i garantir que les c\u00f2pies de seguretat es realitzin regularment per mantenir la integritat de les teves dades.</p>"},{"location":"servidorNAS/#activitat-practica","title":"Activitat pr\u00e0ctica","text":"<p>Pots trobar una guia dels aspectes de configuraci\u00f3 essencials en aquest tutorial.</p> <p>http://somebooks.es/crea-tu-propio-nas-con-openmediavault-parte-1/</p> <p>http://somebooks.es/crea-tu-propio-nas-con-openmediavault-parte-2/</p> <p>En classe s'han vist les seg\u00fcents accions de securitzaci\u00f3.</p> <ul> <li> <p>Habilitar connexi\u00f3 d'administraci\u00f3 https</p> </li> <li> <p>Habilitar FTP segur</p> </li> <li> <p>Generar certificats del domini i per a ssh</p> </li> <li> <p>Creaci\u00f3 d'un RAID-5</p> </li> <li> <p>Habilitar serveis SMB/CIFS</p> </li> <li> <p>Creaci\u00f3 d'usuaris</p> </li> <li> <p>Habilitaci\u00f3 de quotes de disc</p> </li> </ul> <p>Crea un sistema de c\u00f2pies de seguretat automatitzat en alguna m\u00e0quina virtual o en l'ordinador anfitri\u00f3 per a que realitze les c\u00f2pies en el NAS que has creat.</p>"},{"location":"sshaudit/","title":"SSH-Audit","text":""},{"location":"sshaudit/#contexto","title":"Contexto","text":"<p><code>ssh-audit</code> es una herramienta programada en Python para la auditor\u00eda de la configuraci\u00f3n de clientes y servidores SSH.</p> <p>Recursos</p> <ul> <li>https://github.com/arthepsy/ssh-audit, repositorio de las versiones 1.X. Sin actualizar desde 2016.</li> <li>https://github.com/jtesta/ssh-audit, fork del repositorio de la versi\u00f3n 1.X que actualmente proporciona las versiones 2.X.</li> <li>https://www.sshaudit.com/hardening_guides.html</li> </ul>"},{"location":"sshaudit/#tareas","title":"Tareas","text":"<ul> <li> <p>Consulta la documentaci\u00f3n de ssh-audit en el fichero README.md y l\u00e9ela con detenimiento.</p> </li> <li> <p>Instala, por cualquiera de los procedimientos documentados, ssh-audit en tu equipo.</p> </li> <li> <p>Te recomendamos la instalaci\u00f3n mediante PyPI o clonando el repositorio.</p> </li> </ul> Bash<pre><code>$ git clone --depth 1 https://github.com/jtesta/ssh-audit.git\n</code></pre> <ul> <li> <p>Audita el servidor de SSH de tu m\u00e1quina servidora</p> </li> <li> <p>Ejecuta la auditor\u00eda contra la instancia de VirtualBox.</p> </li> <li> <p>Modifica la configuraci\u00f3n del servidor en de funci\u00f3n de los resultados obtenidos y de la gu\u00eda de fortificaci\u00f3n. En l\u00edneas generales, deber\u00e1s:</p> </li> </ul> <p>Hardering SSH</p> <ul> <li>Regenerar las claves RSA y ED25519.</li> <li>Borrar los grupos Diffie-Hellman peque\u00f1os.</li> <li>Habilitar las claves RSA y ED25519.</li> <li>Restringir los algoritmos de intercambio de claves, cifrado y MAC1 admitidos.</li> </ul> <ul> <li>Ejecuta de nuevo la auditor\u00eda contra tu instancia para comprobar que las modificaciones han sido satisfactorias y ya no ofrece fallos.</li> </ul>"},{"location":"sshaudit/#audita-el-cliente-de-ssh-que-estes-utilizando","title":"Audita el cliente de SSH que est\u00e9s utilizando.","text":"<ul> <li> <p>Ejecuta la auditor\u00eda contra tu cliente de SSH.</p> </li> <li> <p>Modifica la configuraci\u00f3n del cliente en de funci\u00f3n de los resultados obtenidos.</p> </li> <li> <p>Ejecuta de nuevo la auditor\u00eda contra tu cliente de SSH para comprobar que las modificaciones han sido satisfactorias y ya no ofrece fallos.</p> </li> </ul>"},{"location":"sshguard/","title":"SSH-Guard","text":""},{"location":"sshguard/#fortificacion-del-servidor-sshguard","title":"Fortificaci\u00f3n del servidor: SSHGuard","text":""},{"location":"sshguard/#contexto","title":"Contexto","text":"<p>SSHGuard</p> <p>SSHGuard es una peque\u00f1a utilidad que se ejecuta en el servidor donde est\u00e9 instalado OpenSSH y sirve para proteger el equipo contra ataques de fuerza bruta. Tambi\u00e9n se puede utilizar para otros servicios (correo electr\u00f3nico y FTP), aunque esta pr\u00e1ctica nos centraremos solo en SSH.</p> <p>Su funcionamiento es muy sencillo:</p> <p>Revisa los archivos de auditor\u00eda del sistema en busca de intentos de acceso no satisfactorios reincidentes Bloquea las direcciones IP de los infractores utilizando alguna herramienta de firewall, entre ellas iptables. Si la direcci\u00f3n se encuentra en una lista blanca, no establece la regla en el firewall. Transcurrido un tiempo desbloquea la direcci\u00f3n del atacante, a no ser que se ha definido en una lista negra en cuyo caso no lo desbloquea.</p>"},{"location":"sshguard/#recursos","title":"Recursos","text":"Text Only<pre><code>https://www.sshguard.net\nhttps://www.sshguard.net/docs.html\nDocumentaci\u00f3n SSHGuard @ Arch Linux.\nman sshguard\nman sshguard-setup\n</code></pre> <p>Bug de sshguard</p> <p>SSHGuard en Ubuntu 20.04 parece funcionar aunque en realidad no aplica los filtros. Consulta https://askubuntu.com/questions/1245543/how-do-i-configure-sshguard-in-ubuntu-20-04 para m\u00e1s informaci\u00f3n.</p>"},{"location":"sshguard/#tareas","title":"Tareas","text":"<ul> <li>Comprobaciones previas</li> </ul> <p>Accede al servidor que has desplegado. Comprueba que se est\u00e9 ejecutando el servicio SSH.</p> Bash<pre><code>$ ss -lt\n</code></pre> <p>Comprueba los archivos de auditor\u00eda en busca de intentos de acceso a SSH. Puedes utilizar la herramienta lnav.</p>"},{"location":"sshguard/#instalacion","title":"Instalaci\u00f3n","text":"<p>Instala SSHGuard desde los paquetes de la distribuci\u00f3n.</p> <p>Consulta la documentaci\u00f3n de SSHGuard.</p> <p>Intenta comprender y explicar cada una de las opciones de los ficheros de configuraci\u00f3n. Los encontrar\u00e1s en la ruta /etc/sshguard.</p> <p>Adapta los ficheros de configuraci\u00f3n a tus necesidades. Per exemple bloqueja als possibles atacants despr\u00e9s de 5 intents fallids de login durant tres minuts.</p> <p>Reinicia el servicio.</p> Bash<pre><code>$ sudo systemctl reload-or-restart sshguard\n</code></pre> <p>Para conocer el estado del servicio Fail2ban podemos usar el siguiente comando que nos indicar\u00e1 los servicios que est\u00e1n supervisados:</p> Bash<pre><code>$ sudo systemctl status sshguard\n</code></pre>"},{"location":"sshguard/#comprobaciones-finales","title":"Comprobaciones finales","text":"<p>Si en el servidor ya hay direcciones IP bloqueadas se deber\u00edan mostrar en el cortafuego dentro del apartado Chain sshguard.</p> Bash<pre><code>$ sudo iptables -L\n</code></pre> <p>Intenta establecer una conexi\u00f3n SSH desde un equipo que no hayas incluido en la lista blanca con un usuario que no exista o con una contrase\u00f1a err\u00f3nea. Despu\u00e9s de varios intentos ya no te dejar\u00e1 conectar.</p> Bash<pre><code>$ ssh usuario_que_no_existe@nombreServidor\n</code></pre> <p>Realiza las mismas pruebas desde un equipo que hayas incluido en la lista blanca. Comprueba que no se bloquea aunque sobrepases el n\u00famero m\u00e1ximo de intentos.</p> <p>Consulta el estado del cortafuego. No deber\u00eda aparecer la direcci\u00f3n IP desde la que has intentado acceder en la lista de reglas.</p> Bash<pre><code>$ sudo iptables -L\n</code></pre>"},{"location":"sshguard/#entrega","title":"Entrega","text":"<p>Sube las capturas de pantalla pedidas en el enunciado dentro de un \u00fanico archivo PDF. No olvides marcar en las capturas de pantalla los cambios realizados para que los pueda localizar m\u00e1s f\u00e1cilmente.</p>"},{"location":"vlans_pfsense/","title":"VLANs Pfsense","text":""},{"location":"vlans_pfsense/#escenari","title":"Escenari","text":"<p>Muntarem un escenari amb un router <code>Pfsense</code>, amb una interfa\u00e7 connectada a la WAN i altra a la LAN. </p> <p>VLANS</p> <p>Crearem dues VLANS que correran per la mateixa interfa\u00e7 de xarxa de la LAN. </p> <p>Utilitzarem els identificadors 20 i 30, de manera que les xarxes que tindrem seran:</p> <ul> <li>WAN (DHCP Client)</li> <li>LAN : 192.168.1.0/24</li> <li>VLAN 20 : 192.168.20.0/24</li> <li>VLAN 30 : 192.168.30.0/24</li> </ul> <p></p>"},{"location":"vlans_pfsense/#procediment","title":"Procediment","text":""},{"location":"vlans_pfsense/#importar-el-appliance-de-pfsense","title":"Importar el appliance de Pfsense","text":"<p>Pots descarregar ac\u00ed el appliance oficial. Has de baixar els dos arxius i importar-lo com qualsevol altre appliance en GNS3.</p> <p></p>"},{"location":"vlans_pfsense/#primers-passos","title":"Primers passos","text":"<p>Desr\u00e9s d'instal\u00b7lar caldr\u00e0 assignar les xarxes WAN i LAN </p>"},{"location":"vlans_pfsense/#habilitar-el-webconfig-des-de-la-wan","title":"Habilitar el webconfig des de la WAN","text":"<p>Com que voldrem configurar Pfsense des del navegador, i en principi no tenim opci\u00f3 d'entrar des de la LAN, ho haurem de fer des de la LAN. </p> <p>No es possible accedir a la web de configuraci\u00f3</p> <p>Amb la configuraci\u00f3 inicial no es pot accedir a la web de configuraci\u00f3. A m\u00e9s a m\u00e9s tamp\u00f2c accepta tr\u00e0fic per la WAN que provinga d'una xarxa local, com \u00e9s el nostre cas des de l'institut. Cal desactivar el firewall, afegir una regla per a accedir des de la WAN i habilitar l'opci\u00f3 de permetre tr\u00e0fic de xarxa local.</p> <p>Seguix les indicacions dels seg\u00fcents tutorials per a fer-ho.</p> <p>https://help.clouding.io/hc/es/articles/360010473620-C%C3%B3mo-configurar-reglas-de-firewall-en-pfSense https://www.labsmac.es/desactivar-las-reglas-del-firewall-por-consola-en-pfsense/</p>"},{"location":"vlans_pfsense/#configuracio","title":"Configuraci\u00f3","text":"<p>Ens connectem per Navegador amb la IP de la WAN del Pfsense amb admin/pfsense.</p> <ul> <li>Assignem i habilitem les interfaces WAN i LAN si no ho estan.</li> </ul>"},{"location":"vlans_pfsense/#creacio-de-vlans","title":"Creaci\u00f3 de VLANs","text":"<p>Les creem sobre la LAN</p> <p></p>"},{"location":"vlans_pfsense/#assignacio","title":"Assignaci\u00f3","text":""},{"location":"vlans_pfsense/#habilitar-les-vlans","title":"Habilitar les VLANs","text":"<p>Cal habilitar les VLANs i indicar que el <code>IPv4 Configuration Type</code> \u00e9s STATIC IPv4, i assignar les IPs corresponents. </p> <p></p>"},{"location":"vlans_pfsense/#habilitar-el-trafic-de-les-vlans-en-el-firewall","title":"Habilitar el tr\u00e0fic de les VLANs en el firewall","text":""},{"location":"vlans_pfsense/#habilitar-els-servidors-dhcp-de-les-vlans-i-la-lan","title":"Habilitar els servidors DHCP de les VLANs i la LAN","text":""},{"location":"vlans_pfsense/#configurar-els-switch","title":"Configurar els switch","text":"<p>TRUNK</p> <p>Caldr\u00e0 habilitar els ports del switchs que faran de TRUNK indicant que s\u00f3n de tipus <code>dot1q</code></p> <p></p> <p>A m\u00e9s a m\u00e9s indicarem en quines boques del switch ix cada VLAN.</p>"},{"location":"vlans_pfsense/#comprovar-les-ips","title":"Comprovar les ips","text":"<p>Es comprova que els Virtual PCs tinguen les IPs correctes en funci\u00f3 de les VLANs a les que s'han connectat.</p>"}]}